/*
 * analog.h
 *
 *  Created on: Apr 15, 2021
 *      Author: gutst
 */

#ifndef INC_ANALOG_H_
#define INC_ANALOG_H_

#include "stm32g0xx.h"
#include <stdlib.h>

// Current Sensor: ACS758LCB-050B-PFF-T

// Analog Struct

typedef struct {

	// Stores the four adcPins
	ADC_HandleTypeDef* adcPin;
	uint8_t selectPins[4];

} Analog;

//
//
// All Public Functions

// EFFECTS: Create a new Analog struct and returns pointer to struct.
Analog* newAnalog(ADC_HandleTypeDef* _adcPin, uint8_t S0, uint8_t S1, uint8_t S2, uint8_t S3);

// EFFECTS: Get voltage data from a specific voltage sensor in Volts
float getVoltageData(const Analog* _Analog);

// EFFECTS: Get current data from a specific current sensor in Amps
float getCurrentData(const Analog* _Analog);

// EFFECTS: Delete the Analog object from memory
void deleteAnalog(Analog* _Analog);

//
//
// All Private Functions

// EFFECTS: Read from ADC object
// Returns a number between 0 and 4095
uint32_t readFromADC(ADC_HandleTypeDef* adcObject);

#endif /* INC_ANALOG_H_ */
